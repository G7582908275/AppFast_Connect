# GitHub Actions 手动构建说明

## 功能概述

现在您可以通过GitHub Actions手动选择要编译的平台和架构，而不需要构建所有平台。工作流使用动态矩阵生成，确保只构建您选择的平台。

## 使用方法

1. 进入GitHub仓库的Actions页面
2. 选择"Build and Release"工作流
3. 点击"Run workflow"按钮
4. 在弹出窗口中配置以下参数：

### 平台选择 (platform)
- **all**: 构建所有平台（Windows、macOS、Linux）
- **windows**: 仅构建Windows版本
- **macos**: 仅构建macOS版本  
- **linux**: 仅构建Linux版本

### 架构选择 (architecture)
- **all**: 构建所有架构（x64、arm64）
- **x64**: 仅构建x64架构
- **arm64**: 仅构建arm64架构

## 工作流程说明

### 动态矩阵生成
工作流首先运行一个`generate-matrix`任务，根据您的选择动态生成构建矩阵：
- 如果选择特定平台和架构，只会生成对应的构建任务
- 如果选择"all"，会生成所有平台的构建任务
- 通过tag推送触发的构建会自动构建所有平台

### 构建执行
- 只有匹配您选择的平台和架构的构建任务会执行
- 每个构建任务都是独立的，不会浪费资源
- 构建时间根据选择的平台数量线性减少

## 使用场景

### 场景1：测试特定平台
如果您只想测试Windows版本，可以：
- 平台：选择 `windows`
- 架构：选择 `all`
- 结果：只构建Windows的x64和arm64版本

### 场景2：快速构建特定架构
如果您只需要x64版本，可以：
- 平台：选择 `all`
- 架构：选择 `x64`
- 结果：构建所有平台的x64版本

### 场景3：精确构建
如果您只需要Windows的arm64版本，可以：
- 平台：选择 `windows`
- 架构：选择 `arm64`
- 结果：只构建Windows的arm64版本

## 构建产物

构建完成后，产物会自动上传到GitHub Actions的Artifacts中，您可以：
1. 在Actions页面查看构建结果
2. 下载对应的构建产物
3. 查看构建日志了解详细信息

## 注意事项

- 手动构建不会创建GitHub Release，产物会保存在Artifacts中
- 只有通过tag推送触发的构建才会创建Release
- 构建时间会根据选择的平台数量相应减少
- 工作流会自动处理tag推送和手动触发的不同情况
